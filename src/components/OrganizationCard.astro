---
const { org } = Astro.props;
const supabaseUrl = import.meta.env.PUBLIC_SUPABASE_URL;

const bucket = "organizations";
const imageUrl = `${supabaseUrl}/storage/v1/object/public/${bucket}/${org.logo}`;

const link = org.website || org.link; // optional clickable link
---

{link ? (
  <a href={link} target="_blank" rel="noopener noreferrer" class="card-link">
    <div class="card">
      <img src={imageUrl} alt={org.name} class="logo" />
      <h2>{org.name}</h2>
      {org.description && <p class="desc">{org.description}</p>}
    </div>
  </a>
) : (
  <div class="card">
    <img src={imageUrl} alt={org.name} class="logo" />
    <h2>{org.name}</h2>
    {org.description && <p class="desc">{org.description}</p>}
  </div>
)}

<style>
.card-link {
  text-decoration: none;
  color: inherit;
}

.card {
  display: flex;
  flex-direction: column;
  align-items: center;

  background: #ffffff;
  padding: 1.25rem;
  border-radius: 14px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);

  text-align: center;
  max-width: 240px;

  transition: transform 0.2s ease, box-shadow 0.2s ease;

  overflow-wrap: anywhere;
  word-break: break-word;
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.logo {
  width: 100px;
  height: 100px;
  object-fit: contain;
  margin-bottom: 1rem;
  transition: transform 0.2s ease;
  border: 3px;
  border-radius: 50%;
}

.card:hover .logo {
  transform: scale(1.05);
}

h2 {
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0.5rem 0;
}

.desc {
  font-size: 0.85rem;
  color: #555;
  margin-top: 0.25rem;
}
</style>
